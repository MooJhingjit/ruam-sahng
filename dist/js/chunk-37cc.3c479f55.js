(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37cc"],{"040d":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"p-2"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column text-left"},[e("h5",{staticClass:"text-bold text-primary"},[[t.local.isPause?e("i",{staticClass:"fa fa-play text-gray c-hand",attrs:{"aria-hidden":"true"},on:{click:function(a){t.switchStatus(!1)}}}):e("i",{staticClass:"fa fa-pause text-gray c-hand",attrs:{"aria-hidden":"true"},on:{click:function(a){t.switchStatus(!0)}}})],t._v("\n        "+t._s(t.local.currentPage)+" / "+t._s(t.pageCount)+" จาก "+t._s(t.totalProducts)+" งาน\n      ")],2)]),e("div",{staticClass:"column text-right"},[e("span",{staticClass:"label"},[e("i",{staticClass:"fa fa fa-clock-o h5",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.TASKSTATUS["wait"]))]),e("span",{staticClass:"label"},[e("i",{staticClass:"fa fa-circle-o h5",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.TASKSTATUS["ip"]))]),e("span",{staticClass:"label"},[e("i",{staticClass:"fa fa-check-circle-o h5 text-success"}),t._v(" "+t._s(t.TASKSTATUS["done"]))]),t._v("\n       \n      "),e("i",{staticClass:"fa fa-sign-out text-gray c-hand",attrs:{"aria-hidden":"true"},on:{click:function(a){t.GO_TOPAGE("Product")}}})])]),e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("table",{staticClass:"table responsive"},[t._m(0),e("tbody",t._l(t.products,function(a){return e("tr",{key:a._id},t._l(a.tasks,function(s,r){return e("td",{key:r,class:t.getItemClass(a,s),attrs:{"data-column":s.taskTitle}},["itemName"===s.key?[e("div",{staticClass:"text-bold"},[t._v(t._s(a.header.jobCode)+" / "+t._s(a.header.productName))]),e("div",{staticClass:"text-bold"},[t._v(t._s(a.header.cusName))]),e("div",[t._v(t._s(t.GET_DATE(s.dateStart))+" - "+t._s(t.GET_DATE(s.dateEnd)))])]:[s.isDisable?[t._m(1,!0)]:"ip"===s.status?[e("div",[e("i",{class:["fa fa-circle-o h4"],attrs:{"aria-hidden":"true"}})]),e("div",[t._v(t._s(t.GET_DATE(s.dateStart)))]),e("div",[t._v("กำลังดำเนินงาน..")])]:"wait"===s.status?[t._m(2,!0)]:"done"===s.status?[e("div",[e("i",{class:["fa fa-check-circle h4 text-success"],attrs:{"aria-hidden":"true"}})]),e("div",[t._v(t._s(t.GET_DATE(s.dateStart)))]),e("div",[t._v(t._s(t.GET_DATE(s.dateEnd)))])]:t._e()]],2)}))}))])])])])},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{staticClass:"h5 text-bold text-center text-primary",attrs:{width:""}}),e("th",{staticClass:"h5 text-bold text-center text-primary",attrs:{width:"120"}},[t._v("สเปคงาน")]),e("th",{staticClass:"h5 text-bold text-center text-primary",attrs:{width:"120"}},[t._v("แบบ")]),e("th",{staticClass:"h5 text-bold text-center text-primary",attrs:{width:"120"}},[t._v("ตัด")]),e("th",{staticClass:"h5 text-bold text-center text-primary",attrs:{width:"120"}},[t._v("พันท์")]),e("th",{staticClass:"h5 text-bold text-center text-primary",attrs:{width:"120"}},[t._v("พับ")]),e("th",{staticClass:"h5 text-bold text-center text-primary",attrs:{width:"120"}},[t._v("เชื่อม")]),e("th",{staticClass:"h5 text-bold text-center text-primary",attrs:{width:"120"}},[t._v("พ่นสี")]),e("th",{staticClass:"h5 text-bold text-center text-primary",attrs:{width:"120"}},[t._v("ประกอบ")]),e("th",{staticClass:"h5 text-bold text-center text-primary",attrs:{width:"120"}},[t._v("อุปกรณ์")]),e("th",{staticClass:"h5 text-bold text-center text-primary",attrs:{width:"120"}},[t._v("วายริ่ง")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("i",{staticClass:"fa fa-times-circle-o h1 text-gray",attrs:{"aria-hidden":"true"}})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("i",{staticClass:"fa fa fa-clock-o h1 text-gray",attrs:{"aria-hidden":"true"}})])}],c=(e("96cf"),e("3040")),i=(e("cadf"),e("551c"),e("097d"),e("56d7")),n=e("9822"),l=e("8671"),o=e("0f1e"),d={props:{},components:{},name:"SchedulePage",data:function(){return{local:{products:[],currentProductObj:[],rows:0,time:0,currentPage:1,timer:null,pageCount:0,isPause:!1},tmp:{productStore:[]}}},computed:{products:function(){return this.local.products},totalProducts:function(){return this.local.currentProductObj.length},pageCount:function(){return Math.ceil(this.totalProducts/this.local.rows)}},created:function(){i["bus"].$on("reloadSchedule",this.fetchData),this.fetchData(!0)},methods:{fetchData:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var a,e,s,r=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=r.length>0&&void 0!==r[0]&&r[0],e="".concat(n["a"].api.schedule.index),t.prev=2,t.next=5,l["a"].getResource({resourceName:e,queryString:[]});case 5:s=t.sent,this.local.rows=s.data.config.rows,this.local.time=parseInt(s.data.config.time),this.tmp.productStore=o["a"].COPY_OBJECT(s.data.result),a&&this.runSchedule(),t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](2);case 14:case"end":return t.stop()}},t,this,[[2,12]])}));return function(){return t.apply(this,arguments)}}(),runSchedule:function(){var t=this;this.recheckProductLists(),this.local.products=this.local.currentProductObj.slice(0,this.local.rows),this.local.timer=setInterval(function(){t.local.isPause||(t.local.currentPage=parseInt(t.local.currentPage)+1,t.pageCount<t.local.currentPage&&(t.local.currentPage=1),1===t.local.currentPage?(t.recheckProductLists(),t.local.start=0):2===t.local.currentPage?t.local.start=t.local.rows:t.local.start=t.local.end,t.local.end=t.local.start+t.local.rows,t.local.products=t.local.currentProductObj.slice(t.local.start,t.local.end))},this.local.time)},recheckProductLists:function(){this.local.currentProductObj=o["a"].COPY_OBJECT(this.tmp.productStore)},addProductEvent:function(){},stopRunnigSchedule:function(){clearInterval(this.local.timer)},getItemClass:function(t,a){return["text-center",{"item-name":"itemName"===a.key},{"bg-success":"itemName"===a.key&&"done"===t.header.status&&!this.IS_SAMEDATE(a.dateEnd)&&!this.IS_LATE(a.dateEnd)},{"bg-warning":"itemName"===a.key&&this.IS_SAMEDATE(a.dateEnd)},{"bg-error":"itemName"===a.key&&this.IS_LATE(a.dateEnd)},{"bg-gray":a.isDisable},{"":"wait"===a.status&&!a.isDisable}]},switchStatus:function(t){this.local.isPause=t}},beforeDestroy:function(){i["bus"].$off("reloadSchedule",this.fetchData),this.stopRunnigSchedule()}},u=d,h=(e("fdd4"),e("2877")),f=Object(h["a"])(u,s,r,!1,null,"2aa469a4",null);f.options.__file="index.vue";a["default"]=f.exports},ae1a:function(t,a,e){},fdd4:function(t,a,e){"use strict";var s=e("ae1a"),r=e.n(s);r.a}}]);
//# sourceMappingURL=chunk-37cc.3c479f55.js.map